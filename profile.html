<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travelog - √Ålbum</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body class="app-page">
    <div class="background-gradient"></div>
    
    <nav class="navbar">
        <div class="nav-container">
            <h1 class="nav-logo">Travelog</h1>
            <div class="nav-menu">
                <a href="app.html" class="nav-link">Feed</a>
                <a href="voting.html" class="nav-link">Votaciones</a>
                <a href="#" id="myProfileLink" class="nav-link active">Mi √Ålbum</a>
                <a href="admin.html" id="adminLink" class="nav-link" style="display: none;">Admin</a>
                <button id="logoutBtn" class="btn btn-secondary">Salir</button>
            </div>
        </div>
    </nav>

    <main class="main-content">
        <div class="profile-header">
            <div class="profile-info">
                <h1 id="profileName">Cargando...</h1>
                <p class="profile-subtitle" id="profileSubtitle">Tu resumen del a√±o</p>
                <div class="profile-visibility" id="visibilityContainer" style="display: none;">
                    <label for="albumVisibility">√Ålbum </label>
                    <select id="albumVisibility">
                        <option value="public">P√∫blico</option>
                        <option value="private">Privado</option>
                    </select>
                </div>
            </div>
            <div class="profile-actions">
                <button id="shareAlbumBtn" class="btn btn-secondary" title="Compartir √°lbum">
                    <span class="share-icon">üîó</span> Compartir
                </button>
                <button id="addPhotoBtn" class="btn btn-primary" style="display: none;">Agregar Foto</button>
            </div>
        </div>

        <div class="photos-container" id="photosContainer">
            <div class="loading">Cargando fotos...</div>
        </div>
    </main>

    <!-- Modal para agregar fotos -->
    <div id="addPhotoModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Agregar nueva foto</h2>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            <form id="addPhotoForm">
                <div class="form-group">
                    <label for="photoFile">Selecciona una foto</label>
                    <input type="file" id="photoFile" accept="image/*" required>
                    <div id="imagePreview" class="image-preview"></div>
                </div>
                <div class="form-group">
                    <label for="photoDescription">Descripci√≥n (opcional)</label>
                    <textarea id="photoDescription" rows="3" placeholder="Cuenta la historia detr√°s de esta foto..."></textarea>
                </div>
                <div class="form-group">
                    <label for="photoDate">Fecha</label>
                    <input type="date" id="photoDate" required>
                </div>
                <div class="form-group">
                    <label for="photoLocation">Lugar (opcional)</label>
                    <input type="text" id="photoLocation" placeholder="¬øD√≥nde fue tomada?">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelPhotoBtn">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar foto</button>
                </div>
                <div id="uploadProgress" class="upload-progress" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <p id="progressText">Subiendo...</p>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para ver foto en detalle -->
    <div id="photoDetailModal" class="modal photo-detail-modal">
        <div class="modal-content photo-detail-content">
            <button class="close-modal" id="closeDetailModal">&times;</button>
            <div class="photo-detail-grid">
                <div class="photo-detail-image">
                    <img id="detailImage" src="" alt="">
                </div>
                <div class="photo-detail-info">
                    <h3 id="detailLocation">Lugar</h3>
                    <p class="detail-date" id="detailDate">Fecha</p>
                    <p class="detail-description" id="detailDescription">Descripci√≥n</p>
                    <div class="photo-stats">
                        <button id="likeBtn" class="btn btn-like">
                            <span id="likeIcon">‚ô°</span> <span id="likeCount">0</span>
                        </button>
                        <div class="view-count">
                            <span>üëÅÔ∏è</span> <span id="viewCount">0</span>
                        </div>
                    </div>
                    <button id="deletePhotoBtn" class="btn btn-danger" style="display: none;">Eliminar foto</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="firebase-config.js"></script>
    <script type="module" src="profile.js"></script>
</body>
</html>
